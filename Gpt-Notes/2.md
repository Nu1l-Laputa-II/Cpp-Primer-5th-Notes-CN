# 第2章 变量和基本类型总结笔记

## **基本内置类型**

### **算数类型（Arithmetic Types）**
- 分为**整型（integral type）**和**浮点型（floating-point type）**。
- **数据类型及其特点：**

| 类型            | 含义                 | 最小尺寸       |
|-----------------|--------------------|--------------|
| **`bool`**     | 布尔型               | 未定义         |
| **`char`**     | 字符                 | 8位          |
| **`wchar_t`**  | 宽字符               | 16位         |
| **`char16_t`** | Unicode字符         | 16位         |
| **`char32_t`** | Unicode字符         | 32位         |
| **`short`**    | 短整数               | 16位         |
| **`int`**      | 整数                 | 16位         |
| **`long`**     | 长整数               | 32位         |
| **`long long`**| 长整数               | 64位         |
| **`float`**    | 单精度浮点数          | 6位有效数字   |
| **`double`**   | 双精度浮点数          | 10位有效数字  |
| **`long double`** | 扩展精度浮点数  | 10位有效数字  |

- **`bool`** 取值为 `true` 或 `false`。
- **`char`** 的大小等于一个字节，可存放机器字符集的任意字符值。
- **整型大小关系：** `short` ≤ `int` ≤ `long` ≤ `long long`。
- **浮点型种类：**
  - 单精度（`float`）
  - 双精度（`double`）
  - 扩展精度（`long double`）

- **带符号类型（signed）和无符号类型（unsigned）：**
  - 整型类型（如 `int`、`long`）默认是 **带符号的**。
  - 添加 `unsigned` 关键字可转为无符号类型，例如 `unsigned int`。
  - **字符型的三种表现形式：** `char`、`signed char`、`unsigned char`（由编译器决定具体形式）。

#### **选择算数类型建议：**
1. 确定数值不为负时，优先选择**无符号类型**。
2. 使用 `int` 执行整数运算；当超出 `int` 表示范围时，选择 `long long`。
3. 避免在算术表达式中使用 `char` 和 `bool` 类型。
4. 执行浮点运算时，建议使用 `double`。

---

### **类型转换（Type Conversions）**
- 类型转换规则由类型的表示范围决定：
  - **布尔值与非布尔值互转：**
    - 非0值转为布尔值时为 `true`；0 为 `false`。
    - 布尔值转为数值时，`true=1`，`false=0`。
  - **浮点数和整数间转换：**
    - 浮点转整数：**截断小数部分**。
    - 整数转浮点：小数部分为0。
  - **无符号数与带符号数：**
    - 无符号类型赋值超出范围时，结果为 **取模后的余数**。
    - 带符号类型赋值超出范围时，**未定义行为**。

- **避免行为依赖于实现环境：** 
  - 避免带符号和无符号类型混用，尤其在循环条件中。

---

### **字面值常量（Literals）**
1. **整数字面值：**
   - 以 `0` 开头：八进制；
   - 以 `0x` 或 `0X` 开头：十六进制；
   - 以 `0b` 或 `0B` 开头：二进制（C++14）。
   - C++14 支持单引号作为数字分隔符（如 `1'000'000` 表示 1000000）。

2. **浮点型字面值：**
   - 默认类型为 `double`。
   - 可添加后缀：`f/F`（`float`），`l/L`（`long double`）。

3. **字符和字符串字面值：**
   - 单引号括起单字符为 `char`。
   - 双引号括起字符序列为字符串字面值，类型为字符数组，末尾包含空字符 `\0`。

4. **转义字符：**

| 含义        | 转义字符 |
|-------------|---------|
| 换行        | `\n`    |
| 水平制表符  | `\t`    |
| 响铃        | `\a`    |
| 垂直制表符  | `\v`    |
| 双引号      | `\"`    |
| 单引号      | `\'`    |
| 反斜杠      | `\\`    |

5. **整型和浮点型的后缀：**

| **后缀**      | **最小匹配类型**  |
|---------------|-----------------|
| `u` 或 `U`    | `unsigned`      |
| `l` 或 `L`    | `long`          |
| `ll` 或 `LL`  | `long long`     |

---

## **变量**

### **变量定义**
- 基本形式：`类型 变量名;`，如 `int a;`。
- **初始化：**
  - **直接初始化：** `int x(5);`
  - **拷贝初始化：** `int y = 5;`
  - **列表初始化：** `int z{5};`
    - 列表初始化时如果有精度损失，编译器会报错。

- **默认初始化：**
  - 定义于函数体外的变量：**初始化为0**。
  - 定义于函数体内的变量：值未定义。

#### **注意：**
- 初始化是创建变量时赋初值，**赋值是覆盖已有值**。
- 建议为所有内置类型变量显式初始化。

---

### **变量声明与定义**
- **声明：** 使变量在当前文件可见，但不分配内存（如 `extern int i;`）。
- **定义：** 分配存储空间并初始化（如 `int j = 0;`）。
- **规则：**
  - **变量只能定义一次，但可多次声明。**
  - 使用 `extern` 关键字声明变量时，不能显式初始化，否则视为定义。

```cpp
extern int i;  // 声明
int i = 0;     // 定义
```

---

### **标识符**
- **规则：**
  - 由字母、数字和下划线组成，**不能以数字开头**。
  - 大小写敏感，避免以下划线开头的大写字母命名。
  - 不能使用 C++ 保留字（如 `int`、`while` 等）。

---

### **作用域（Scope）**
1. **全局作用域：**
   - 定义于函数体外的变量。
   - 在整个程序中都可见。
2. **局部作用域：**
   - 定义于函数体内的变量。
   - 仅在所在块内有效。
3. **嵌套作用域：**
   - 内层可访问外层变量。
   - 内层变量可屏蔽外层同名变量。
4. **作用域操作符（`::`）：**
   - `::var` 表示全局作用域的变量。

---

## **复合类型**

### **引用（References）**
- 引用是为对象起别名，使用 `&` 定义。
- **特点：**
  - 必须初始化，且初始化后绑定的对象不可更改。
  - 不能引用字面值或表达式结果。

```cpp
int i = 42;
int &r = i;   // r 引用 i
```

---

### **指针（Pointers）**
- 指针存放**对象地址**，通过 `*` 访问对象。
- **空指针：**
  - `nullptr` 是空指针字面值（优于 `NULL` 或 `0`）。
- **指针类型：**
  - 指针的类型需与所指对象的类型一致。
  - 特殊指针类型：`void*` 可存放任意对象地址，但不能操作对象。

---

### **`const`限定符**
- **`const`变量：**
  - 必须初始化，值不可更改。
  - 默认具有**文件内有效性**。
  - 若需共享，需使用 `extern`。

- **`const`引用：**
  - 引用常量或不可修改对象。

- **`constexpr`变量：**
  - 值必须在编译时确定。

---

### **`auto`和`decltype`**
- **`auto`：**
  - 自动推断类型，需初始化。
  - 会忽略顶层 `const`。

- **`decltype`：**
  - 返回表达式的类型，保留顶层 `const`。

--- 
