# 第3章 字符串、向量和数组 - 总结笔记

---

## **1. 命名空间的 `using` 声明**

- **`using` 声明**可以简化代码，使得在程序中使用名字时无须加前缀。
  ```cpp
  using std::cout;  // 省略 std::cout 中的 "std::" 前缀
  ```
- **注意事项：**
  - 每个名字需要独立的 `using` 声明。
  - **头文件中不建议使用 `using` 声明**，以免影响命名空间管理。

---

## **2. 标准库类型 `string`**

- **定义：**  
  表示可变长的字符序列，定义于头文件 `<string>` 中。

### **2.1 定义与初始化**
| **方式**                           | **含义**                                         |
|------------------------------------|-------------------------------------------------|
| `string s1;`                       | 默认初始化为空串                                |
| `string s2(s1);` 或 `string s2 = s1;` | 拷贝初始化，`s2` 是 `s1` 的拷贝                   |
| `string s3("val");` 或 `string s3 = "val";` | 用 C 风格字符串初始化 `s3`                      |
| `string s4(n, 'c');`               | 初始化为连续 `n` 个字符 `c` 组成的字符串         |

---

### **2.2 `string` 对象的操作**
| **操作**           | **含义**                                                                 |
|---------------------|-------------------------------------------------------------------------|
| `os << s`           | 输出字符串 `s` 到输出流 `os`。                                         |
| `is >> s`           | 从输入流 `is` 读取字符串到 `s`（以空白分隔）。                        |
| `getline(is, s)`    | 从输入流 `is` 读取一行到 `s`。                                         |
| `s.empty()`         | 检查字符串是否为空。                                                   |
| `s.size()`          | 返回字符串长度（类型为 `string::size_type`）。                         |
| `s[n]`              | 返回字符串中第 `n` 个字符的引用。                                      |
| `s1 + s2`           | 拼接两个字符串并返回结果。                                             |
| `s1 == s2`          | 比较两个字符串内容是否相同。                                           |
| `<`、`<=`、`>`、`>=` | 按字典序比较字符串。                                                  |

- **注意事项：**
  - 使用 `getline` 读取字符串时，遇到换行符停止，但换行符本身不会存储。
  - `size()` 返回值类型为无符号数，应避免与有符号数混用。
  - 当混合使用字符串和字符串字面值时，确保至少有一个操作数是 `string` 类型：
    ```cpp
    string s1 = "hello" + string(", world");  // 合法
    ```

---

### **2.3 字符操作**
- 需要引入头文件 `<cctype>`，常用函数包括：

| **函数**       | **功能**                     |
|----------------|------------------------------|
| `isalpha(c)`   | 检查字符 `c` 是否为字母。    |
| `isdigit(c)`   | 检查字符 `c` 是否为数字。    |
| `islower(c)`   | 检查字符 `c` 是否为小写字母。|
| `isupper(c)`   | 检查字符 `c` 是否为大写字母。|
| `tolower(c)`   | 将字符 `c` 转为小写。         |
| `toupper(c)`   | 将字符 `c` 转为大写。         |

- **范围 `for` 遍历字符串：**
  ```cpp
  for (auto c : str) {
      cout << c << endl;  // 遍历输出每个字符
  }
  ```
- 如果需要修改字符值，循环变量需为**引用**类型：
  ```cpp
  for (auto &c : str) {
      c = toupper(c);  // 将字符转为大写
  }
  ```

---

## **3. 标准库类型 `vector`**

- **定义：**  
  表示动态数组，所有元素类型必须相同，定义于头文件 `<vector>` 中。

### **3.1 定义与初始化**
| **方式**                          | **含义**                                             |
|-----------------------------------|-----------------------------------------------------|
| `vector<int> v1;`                 | 默认初始化为空 `vector`。                           |
| `vector<int> v2(v1);` 或 `vector<int> v2 = v1;` | 拷贝初始化，`v2` 是 `v1` 的拷贝。                 |
| `vector<int> v3(n, val);`         | 初始化为包含 `n` 个值为 `val` 的元素。             |
| `vector<int> v4 = {1, 2, 3};`     | 列表初始化，包含 `{1, 2, 3}`。                     |

- **添加元素：**  
  使用 `push_back` 将元素追加到尾部。
  ```cpp
  vector<int> v;
  v.push_back(10);  // 添加元素 10
  ```

---

### **3.2 常用操作**
| **操作**            | **含义**                                 |
|----------------------|------------------------------------------|
| `v.empty()`          | 检查是否为空。                          |
| `v.size()`           | 返回元素个数（类型为 `vector::size_type`）。|
| `v.push_back(val)`   | 将值 `val` 添加到末尾。                  |
| `v[n]`               | 返回第 `n` 个元素的引用。                |
| `v = {a, b, c}`      | 将 `v` 赋值为 `{a, b, c}` 的拷贝。       |

---

## **4. 迭代器**

- **定义：**  
  迭代器用于遍历容器中的元素，类似指针。

### **4.1 常用操作**
| **操作**           | **含义**                                     |
|---------------------|----------------------------------------------|
| `*iter`             | 解引用，返回迭代器所指的元素。              |
| `iter->mem`         | 等价于 `(*iter).mem`，访问元素的成员。       |
| `++iter`            | 移动到下一个元素。                          |
| `--iter`            | 移动到上一个元素（双向迭代器支持）。         |
| `iter1 == iter2`    | 检查两个迭代器是否指向同一个元素。           |
| `iter1 != iter2`    | 检查两个迭代器是否指向不同的元素。           |

- **获取迭代器：**
  - `v.begin()`：指向首元素。
  - `v.end()`：指向尾后位置。
  ```cpp
  for (auto it = v.begin(); it != v.end(); ++it) {
      cout << *it << endl;
  }
  ```
- **常量迭代器：**
  - 使用 `const_iterator` 遍历只读容器。

---

## **5. 数组（Array）**

- **定义：**  
  固定大小的序列，大小必须在编译时已知。

### **5.1 定义与初始化**
```cpp
int arr[5] = {1, 2, 3};  // 剩余元素值为 0
int arr[] = {4, 5, 6};   // 自动推断大小
```
- **字符数组：**  
  字符串字面值可用于初始化字符数组，但会包含末尾的空字符 `\0`。
  ```cpp
  char str[] = "C++";  // 实际长度为 4（含空字符）
  ```

---

### **5.2 数组与指针**
- 数组名会退化为指向首元素的指针：
  ```cpp
  int arr[5] = {1, 2, 3, 4, 5};
  int *p = arr;  // p 指向 arr 的首元素
  ```
- 使用标准库函数获取首尾指针（C++11 提供）：
  ```cpp
  int *beg = std::begin(arr);
  int *end = std::end(arr);
  ```

---

### **5.3 多维数组**
- 多维数组是数组的数组：
  ```cpp
  int matrix[2][3] = {{1, 2, 3}, {4, 5, 6}};
  ```
- **访问元素：**
  ```cpp
  cout << matrix[0][1];  // 输出 2
  ```

---

## **6. C 风格字符串**

- C 风格字符串是以空字符 `\0` 结尾的字符数组。
- 常用操作（头文件 `<cstring>`）：
  | **操作**           | **功能**                                             |
  |--------------------|-----------------------------------------------------|
  | `strlen(p)`        | 返回字符串长度，不含空字符。                         |
  | `strcmp(p1, p2)`   | 比较两个字符串，返回差值。                           |
  | `strcpy(p1, p2)`   | 将字符串 `p2` 复制到 `p1`。                          |
  | `strcat(p1, p2)`   | 将字符串 `p2` 拼接到 `p1` 末尾。                     |

---

## **7. 使用建议**
1. **优先使用标准库类型（`vector` 和 `string`）。**
2. 避免混用标准库容器与原生数组/指针。  
3. 使用范围 `for` 或迭代器简化容器遍历操作。

